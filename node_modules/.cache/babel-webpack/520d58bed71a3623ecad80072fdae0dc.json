{"ast":null,"code":"import { __awaiter } from \"tslib\";\nimport { ChangeDetectorRef, EventEmitter } from '@angular/core';\nimport { AlertController } from '@ionic/angular';\nimport { StorageService } from '../../shared/services/storage.service';\nimport { ApiService } from '../../shared/services/api.service';\nimport { UserService } from '../../shared/services/user.service';\nimport { Router } from '@angular/router';\nimport { MatDialogRef } from '@angular/material/dialog';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../shared/services/storage.service\";\nimport * as i2 from \"@ionic/angular\";\nimport * as i3 from \"../../shared/services/api.service\";\nimport * as i4 from \"@angular/router\";\nimport * as i5 from \"@angular/material/dialog\";\nimport * as i6 from \"../../shared/services/user.service\";\nimport * as i7 from \"@angular/common\";\nfunction GunlistComponent_div_10_img_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"img\", 9);\n  }\n}\nfunction GunlistComponent_div_10_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r4 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 6);\n    i0.ɵɵlistener(\"click\", function GunlistComponent_div_10_Template_div_click_0_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r4);\n      const weapon_r1 = restoredCtx.$implicit;\n      const ctx_r3 = i0.ɵɵnextContext();\n      return ctx_r3.onModelClicked(weapon_r1);\n    });\n    i0.ɵɵelementStart(1, \"span\", 7);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(3, GunlistComponent_div_10_img_3_Template, 1, 0, \"img\", 8);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const weapon_r1 = ctx.$implicit;\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(weapon_r1);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.isWeaponSelected(weapon_r1));\n  }\n}\nexport let GunlistComponent = /*#__PURE__*/(() => {\n  class GunlistComponent {\n    constructor(storageService, alertController, apiService, changeDetection, router, dialogRef, userService) {\n      this.storageService = storageService;\n      this.alertController = alertController;\n      this.apiService = apiService;\n      this.changeDetection = changeDetection;\n      this.router = router;\n      this.dialogRef = dialogRef;\n      this.userService = userService;\n      this.close = new EventEmitter();\n      this.models = null;\n      this.myGuns = null;\n      this.selectedGunType = '';\n    }\n    ngOnInit() {\n      const inventory = this.storageService.getItem('inventory');\n      if (!inventory) {\n        this.myGuns = [];\n      } else {\n        this.myGuns = inventory.wepons;\n      }\n      this.DEFUALT_GUNS = this.storageService.getItem('gunList');\n    }\n    onBackPressed() {\n      this.dialogRef.close();\n    }\n    gunWasSelected(item) {\n      return __awaiter(this, void 0, void 0, function* () {\n        const alert = yield this.alertController.create({\n          header: 'Duplicate Error',\n          message: item.model + ' is already selected',\n          buttons: ['OK']\n        });\n        yield alert.present();\n      });\n    }\n    onSingleClick(item) {\n      if (!this.myGuns) {\n        this.myGuns = [];\n      }\n      if (this.myGuns.filter(o => o === item).length === 0) {\n        this.myGuns.push(item);\n      } else {\n        this.gunWasSelected(item);\n      }\n    }\n    onModelClicked(item) {\n      if (!this.myGuns) {\n        this.myGuns = [];\n      }\n      if (this.myGuns.filter(o => o === item).length === 0) {\n        this.myGuns.push(item);\n        let inventory = this.storageService.getItem('inventory');\n        if (!inventory) {\n          inventory = {};\n        }\n        inventory.wepons = this.myGuns;\n        this.storageService.setItem('inventory', inventory);\n      } else {\n        this.myGuns.splice(this.myGuns.indexOf(item), 1);\n      }\n      this.changeDetection.detectChanges();\n    }\n    onSaveWeapons() {\n      const mySights = this.storageService.getItem('mysightList');\n      const inventory = {\n        wepons: this.myGuns,\n        sight: mySights,\n        userId: this.userService.getUserId()\n      };\n      this.storageService.setItem('inventory', inventory);\n      this.close.emit();\n    }\n    removeMyGun(item) {\n      this.myGuns.splice(this.myGuns.indexOf(item), 1);\n    }\n    isWeaponSelected(weapon) {\n      return this.myGuns.includes(weapon);\n    }\n  }\n  GunlistComponent.ɵfac = function GunlistComponent_Factory(t) {\n    return new (t || GunlistComponent)(i0.ɵɵdirectiveInject(i1.StorageService), i0.ɵɵdirectiveInject(i2.AlertController), i0.ɵɵdirectiveInject(i3.ApiService), i0.ɵɵdirectiveInject(i0.ChangeDetectorRef), i0.ɵɵdirectiveInject(i4.Router), i0.ɵɵdirectiveInject(i5.MatDialogRef), i0.ɵɵdirectiveInject(i6.UserService));\n  };\n  GunlistComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: GunlistComponent,\n    selectors: [[\"app-gunlist\"]],\n    outputs: {\n      close: \"close\"\n    },\n    decls: 12,\n    vars: 1,\n    consts: [[\"src\", \"assets/icons/Arrow%20@3x.png\", 3, \"click\"], [1, \"content\"], [1, \"all-weapons-title\"], [1, \"weapon-list-wrapper\"], [\"class\", \"weapon-list\", 3, \"click\", 4, \"ngFor\", \"ngForOf\"], [1, \"place-holder\"], [1, \"weapon-list\", 3, \"click\"], [1, \"weapon-title\"], [\"src\", \"assets/icons/Icon%20-%20Check%20Circle%20-%20Filled.svg\", 4, \"ngIf\"], [\"src\", \"assets/icons/Icon%20-%20Check%20Circle%20-%20Filled.svg\"]],\n    template: function GunlistComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"section\");\n        i0.ɵɵelementStart(1, \"header\");\n        i0.ɵɵelementStart(2, \"div\");\n        i0.ɵɵelementStart(3, \"img\", 0);\n        i0.ɵɵlistener(\"click\", function GunlistComponent_Template_img_click_3_listener() {\n          return ctx.onBackPressed();\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(4, \"span\");\n        i0.ɵɵtext(5, \"Select Weapon\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(6, \"div\", 1);\n        i0.ɵɵelementStart(7, \"div\", 2);\n        i0.ɵɵtext(8, \" All Weapons\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(9, \"div\", 3);\n        i0.ɵɵtemplate(10, GunlistComponent_div_10_Template, 4, 2, \"div\", 4);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(11, \"div\", 5);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(10);\n        i0.ɵɵproperty(\"ngForOf\", ctx.DEFUALT_GUNS);\n      }\n    },\n    directives: [i7.NgForOf, i7.NgIf],\n    styles: [\"section[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]{height:56px;margin-top:24px;display:flex;align-items:center;justify-content:center}section[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{height:24px;width:100%;display:flex;justify-content:center;align-items:center}section[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{position:absolute;left:24px;height:30px}section[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:100%;height:24px;font-family:Roboto;font-size:20px;font-weight:500;font-stretch:normal;font-style:normal;line-height:1.2;letter-spacing:.26px;text-align:center;color:#000c}section[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .all-weapons-title[_ngcontent-%COMP%]{font-family:Roboto;font-size:12px;font-weight:normal;font-stretch:normal;font-style:normal;line-height:1.17;letter-spacing:1.88px;text-align:left;color:#0000009c;margin-top:129px;margin-left:24px}section[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .weapon-list-wrapper[_ngcontent-%COMP%]{overflow-y:scroll;display:block;flex-direction:column;height:621px}section[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .weapon-list-wrapper[_ngcontent-%COMP%]   .weapon-list[_ngcontent-%COMP%]{height:52px;display:flex;align-items:center;border-bottom:1px solid #f2f2f2;justify-content:space-between}section[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .weapon-list-wrapper[_ngcontent-%COMP%]   .weapon-list[_ngcontent-%COMP%]   .weapon-title[_ngcontent-%COMP%]{font-family:Roboto;font-size:14px;font-weight:normal;font-stretch:normal;font-style:normal;line-height:1.14;letter-spacing:.24px;text-align:left;color:#000000de;margin-left:36px}section[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .weapon-list-wrapper[_ngcontent-%COMP%]   .weapon-list[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:20px;width:20px;margin-right:31px}section[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .place-holder[_ngcontent-%COMP%]{width:100%;height:97px}\"]\n  });\n  return GunlistComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}