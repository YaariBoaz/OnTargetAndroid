{"ast":null,"code":"import { __awaiter } from \"tslib\";\nimport { BackgroundMode } from '@awesome-cordova-plugins/background-mode/ngx';\nimport { IonRouterOutlet, Platform } from '@ionic/angular';\nimport { InitService } from './shared/services/init.service';\nimport { LoadingController } from '@ionic/angular';\nimport { BleService } from './shared/services/ble.service';\nimport { ScreenOrientation } from '@ionic-native/screen-orientation/ngx';\nimport { PopupsService } from './shared/services/popups.service';\nimport { NativePageTransitions } from '@ionic-native/native-page-transitions/ngx';\nimport { MatDialog } from '@angular/material/dialog';\nimport { WizardService } from './shared/authentication/signup-wizard/wizard.service';\nimport 'capacitor-plugin-app-tracking-transparency'; // only if you want web support\nimport { AppTrackingTransparency } from 'capacitor-plugin-app-tracking-transparency';\nimport { InAppPurchase2 } from '@awesome-cordova-plugins/in-app-purchase-2/ngx';\nimport { Insomnia } from \"@awesome-cordova-plugins/insomnia/ngx\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@ionic/angular\";\nimport * as i2 from \"./shared/services/init.service\";\nimport * as i3 from \"@awesome-cordova-plugins/insomnia/ngx\";\nimport * as i4 from \"@awesome-cordova-plugins/in-app-purchase-2/ngx\";\nimport * as i5 from \"@ionic-native/native-page-transitions/ngx\";\nimport * as i6 from \"./shared/services/ble.service\";\nimport * as i7 from \"./shared/authentication/signup-wizard/wizard.service\";\nimport * as i8 from \"./shared/services/popups.service\";\nimport * as i9 from \"@ionic-native/screen-orientation/ngx\";\nimport * as i10 from \"@awesome-cordova-plugins/background-mode/ngx\";\nimport * as i11 from \"@angular/material/dialog\";\nimport * as i12 from \"@angular/common\";\nfunction AppComponent_div_0_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 1);\n    i0.ɵɵelementStart(1, \"span\");\n    i0.ɵɵtext(2, \" Please Wait\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(3, \"img\", 2);\n    i0.ɵɵelementEnd();\n  }\n}\nconst ADL_IAP_KEY = 'adl';\nconst ADL_IAP_KEY_2_SESSIONS = 'twoSessionSub';\nconst ADL_IAP_KEY_6_SESSIONS = 'sixSessions';\nexport let AppComponent = /*#__PURE__*/(() => {\n  class AppComponent {\n    constructor(platform, initService, insomnia, store, nativePageTransitions, ble, wizardService, popupsService, loadingController, screenOrientation, routerOutlet, backgroundMode, dialog) {\n      this.platform = platform;\n      this.initService = initService;\n      this.insomnia = insomnia;\n      this.store = store;\n      this.nativePageTransitions = nativePageTransitions;\n      this.ble = ble;\n      this.wizardService = wizardService;\n      this.popupsService = popupsService;\n      this.loadingController = loadingController;\n      this.screenOrientation = screenOrientation;\n      this.routerOutlet = routerOutlet;\n      this.backgroundMode = backgroundMode;\n      this.dialog = dialog;\n      this.splash = true;\n      this.isLoding = false;\n      this.isiOS = false;\n      this.screenOrientation.lock(this.screenOrientation.ORIENTATIONS.PORTRAIT);\n      this.initService.getSights();\n      this.initService.getSightsZeroing();\n      this.initService.getWeapons();\n      this.initService.getCalibers();\n      this.platform.ready().then(() => {\n        // this.backgroundMode.enable();\n        this.platform.backButton.subscribeWithPriority(9999, () => {\n          document.addEventListener('backbutton', event => {\n            event.preventDefault();\n            event.stopPropagation();\n          }, false);\n        });\n        this.platform.pause.subscribe(() => {\n          console.log('IN PAUSE');\n        });\n        this.platform.resume.subscribe(() => {\n          console.log('IN RESUME');\n        });\n        if (this.platform.is('ios')) {\n          this.isiOS = true;\n        }\n        window.addEventListener('beforeunload', () => {\n          this.initService.distory();\n        });\n      });\n      this.initService.isLoading.subscribe(isLoading => {\n        this.isLoding = isLoading;\n      });\n      this.wizardService.isLoading.subscribe(isLoading => {\n        this.isLoding = isLoading;\n      });\n      this.insomnia.keepAwake().then(() => console.log('keep awake success'), () => console.log('keep awake error'));\n      // this.store.register({id: ADL_IAP_KEY, type: this.store.PAID_SUBSCRIPTION});\n      // this.store.register({id: ADL_IAP_KEY_2_SESSIONS, type: this.store.CONSUMABLE});\n      // this.store.register({id: ADL_IAP_KEY_6_SESSIONS, type: this.store.CONSUMABLE});\n      this.getStatus().then(data => {});\n      this.requestPermission().then(data => {\n        console.log(data.status);\n      });\n      this.routerOutlet.swipeGesture = false;\n    }\n    getStatus() {\n      return __awaiter(this, void 0, void 0, function* () {\n        const response = yield AppTrackingTransparency.getStatus();\n        console.log(response);\n        // { status: 'authorized' } for example\n        return response;\n      });\n    }\n    requestPermission() {\n      return __awaiter(this, void 0, void 0, function* () {\n        const response = yield AppTrackingTransparency.requestPermission();\n        console.log(response);\n        // { status: 'authorized' } for example\n        this.store.register({\n          id: ADL_IAP_KEY,\n          type: this.store.PAID_SUBSCRIPTION\n        });\n        this.store.register({\n          id: ADL_IAP_KEY_2_SESSIONS,\n          type: this.store.CONSUMABLE\n        });\n        this.store.register({\n          id: ADL_IAP_KEY_6_SESSIONS,\n          type: this.store.CONSUMABLE\n        });\n        return response;\n      });\n    }\n    ngOnInit() {\n      setTimeout(() => {\n        this.splash = false;\n      }, 5000);\n      this.ble.notifyDisconnect.subscribe(flag => {\n        if (flag) {}\n      });\n    }\n    presentLoadingWithOptions() {\n      return __awaiter(this, void 0, void 0, function* () {\n        const loading = yield this.loadingController.create({\n          cssClass: 'my-custom-class',\n          spinner: 'bubbles',\n          duration: 2000,\n          message: 'Unexpected disconnection, Reconnecting to the target',\n          translucent: true,\n          backdropDismiss: true\n        });\n        yield loading.present();\n        const {\n          role,\n          data\n        } = yield loading.onDidDismiss();\n      });\n    }\n    ngOnDestroy() {}\n  }\n  AppComponent.ɵfac = function AppComponent_Factory(t) {\n    return new (t || AppComponent)(i0.ɵɵdirectiveInject(i1.Platform), i0.ɵɵdirectiveInject(i2.InitService), i0.ɵɵdirectiveInject(i3.Insomnia), i0.ɵɵdirectiveInject(i4.InAppPurchase2), i0.ɵɵdirectiveInject(i5.NativePageTransitions), i0.ɵɵdirectiveInject(i6.BleService), i0.ɵɵdirectiveInject(i7.WizardService), i0.ɵɵdirectiveInject(i8.PopupsService), i0.ɵɵdirectiveInject(i1.LoadingController), i0.ɵɵdirectiveInject(i9.ScreenOrientation), i0.ɵɵdirectiveInject(i1.IonRouterOutlet), i0.ɵɵdirectiveInject(i10.BackgroundMode), i0.ɵɵdirectiveInject(i11.MatDialog));\n  };\n  AppComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: AppComponent,\n    selectors: [[\"app-root\"]],\n    decls: 3,\n    vars: 3,\n    consts: [[\"class\", \"loader-wrapper\", 4, \"ngIf\"], [1, \"loader-wrapper\"], [\"src\", \"../assets/icons/loader.gif\"]],\n    template: function AppComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵtemplate(0, AppComponent_div_0_Template, 4, 0, \"div\", 0);\n        i0.ɵɵelementStart(1, \"ion-app\");\n        i0.ɵɵelement(2, \"ion-router-outlet\");\n        i0.ɵɵelementEnd();\n      }\n      if (rf & 2) {\n        i0.ɵɵproperty(\"ngIf\", ctx.isLoding);\n        i0.ɵɵadvance(1);\n        i0.ɵɵclassProp(\"ios\", ctx.isiOS);\n      }\n    },\n    directives: [i12.NgIf, i1.IonApp, i1.IonRouterOutlet],\n    styles: [\"#custom-overlay[_ngcontent-%COMP%]{display:flex;height:100%;flex-direction:column;align-items:center;justify-content:space-evenly}#custom-overlay[_ngcontent-%COMP%]   .sentences[_ngcontent-%COMP%]{display:flex;width:100%;justify-content:space-around}.loader-wrapper[_ngcontent-%COMP%]{position:absolute;z-index:9999;width:100%;height:100%;background-color:#000;opacity:.87;display:flex;justify-content:center;align-items:center;flex-direction:column}.loader-wrapper[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:75px;height:75px}.loader-wrapper[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-family:Roboto;font-size:14px;font-weight:500;font-stretch:normal;font-style:normal;line-height:1.14;letter-spacing:1.25px;text-align:center;color:#fff}@media screen and (orientation: portrait){.ios[_ngcontent-%COMP%]{margin-top:30px;height:97%}}\"]\n  });\n  return AppComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}