{"ast":null,"code":"import { EventEmitter } from '@angular/core';\nimport { PurchaseService } from '../../services/purchase.service';\nimport { MatDialogRef } from \"@angular/material/dialog\";\nimport { InitService } from \"../../services/init.service\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../services/purchase.service\";\nimport * as i2 from \"@angular/material/dialog\";\nimport * as i3 from \"../../services/init.service\";\nimport * as i4 from \"@angular/common\";\nfunction PaymentComponent_ng_container_10_li_2_ng_container_1_p_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\", 17);\n    i0.ɵɵtext(1, \" POPULAR! \");\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelementStart(2, \"svg\", 18);\n    i0.ɵɵelement(3, \"path\", 19);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n}\nfunction PaymentComponent_ng_container_10_li_2_ng_container_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"p\", 3);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(3, PaymentComponent_ng_container_10_li_2_ng_container_1_p_3_Template, 4, 0, \"p\", 12);\n    i0.ɵɵelementStart(4, \"div\", 13);\n    i0.ɵɵelementStart(5, \"p\", 14);\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"div\", 15);\n    i0.ɵɵelementStart(8, \"p\");\n    i0.ɵɵtext(9, \"/\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"p\");\n    i0.ɵɵtext(11);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(12, \"p\", 16);\n    i0.ɵɵtext(13);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const item_r2 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(item_r2.timeLimit);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", item_r2.isPopular);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(item_r2.price);\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate(item_r2.title ? item_r2.title : item_r2.type);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(item_r2.description);\n  }\n}\nconst _c0 = function (a0) {\n  return {\n    \"selected\": a0\n  };\n};\nfunction PaymentComponent_ng_container_10_li_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r7 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"li\", 11);\n    i0.ɵɵlistener(\"click\", function PaymentComponent_ng_container_10_li_2_Template_li_click_0_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r7);\n      const item_r2 = restoredCtx.$implicit;\n      const ctx_r6 = i0.ɵɵnextContext(2);\n      return ctx_r6.selectedAndReload(item_r2);\n    });\n    i0.ɵɵtemplate(1, PaymentComponent_ng_container_10_li_2_ng_container_1_Template, 14, 5, \"ng-container\", 5);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const item_r2 = ctx.$implicit;\n    i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(2, _c0, item_r2.isSelected));\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", item_r2.price);\n  }\n}\nfunction PaymentComponent_ng_container_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"ul\", 9);\n    i0.ɵɵtemplate(2, PaymentComponent_ng_container_10_li_2_Template, 2, 4, \"li\", 10);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.products);\n  }\n}\nexport let PaymentComponent = /*#__PURE__*/(() => {\n  class PaymentComponent {\n    constructor(purchaseService, dialogRef, initService) {\n      this.purchaseService = purchaseService;\n      this.dialogRef = dialogRef;\n      this.initService = initService;\n      this.exit = new EventEmitter();\n      this.prices = [{\n        timeLimit: 'ONE TIME USE',\n        price: 3,\n        pricePer: 'session',\n        sessionForFree: 'Two session for free',\n        isPopular: false,\n        isSelected: false\n      }, {\n        timeLimit: 'ONE TIME USE',\n        price: 3,\n        pricePer: 'session',\n        sessionForFree: 'Two session for free',\n        isPopular: false,\n        isSelected: false\n      }, {\n        timeLimit: 'NO LIMIT',\n        price: 16.99,\n        pricePer: 'month',\n        sessionForFree: 'Unlimited session!',\n        isPopular: true,\n        isSelected: true\n      }];\n    }\n    ngOnInit() {\n      this.purchaseService.getProducts().then(products => {\n        // this.products = products;\n        this.products = products.filter(pro => {\n          return pro.price != null;\n        });\n        this.products.forEach(x => x['isSelected'] = false);\n        const a = this.products.find(o => o.id === 'autoRenew');\n        a['isSelected'] = true;\n        console.log(\"products =>\", products);\n      });\n      this.purchaseService.$notifyPurchaseApproved.subscribe(data => {\n        if (data) {\n          this.exit.emit(true);\n        }\n      });\n    }\n    onClose() {\n      this.dialogRef.close();\n      this.initService.isLoading.next(true);\n      setTimeout(() => {\n        this.initService.isLoading.next(false);\n      }, 2000);\n    }\n    onPurchase() {\n      this.purchaseService.purchase(this.products.find(pro => {\n        return pro['isSelected'];\n      }));\n      // console.log(this.purchaseService.products);\n    }\n\n    selectedAndReload(item) {\n      this.products.forEach(x => x['isSelected'] = false);\n      item.isSelected = true;\n    }\n  }\n  PaymentComponent.ɵfac = function PaymentComponent_Factory(t) {\n    return new (t || PaymentComponent)(i0.ɵɵdirectiveInject(i1.PurchaseService), i0.ɵɵdirectiveInject(i2.MatDialogRef), i0.ɵɵdirectiveInject(i3.InitService));\n  };\n  PaymentComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: PaymentComponent,\n    selectors: [[\"app-payment\"]],\n    outputs: {\n      exit: \"exit\"\n    },\n    decls: 17,\n    vars: 1,\n    consts: [[1, \"payment\"], [1, \"container\"], [1, \"x\", 3, \"click\"], [1, \"title\"], [1, \"text\"], [4, \"ngIf\"], [1, \"explanation\"], [1, \"controls\"], [1, \"confirm\", 3, \"click\"], [1, \"prices\"], [3, \"ngClass\", \"click\", 4, \"ngFor\", \"ngForOf\"], [3, \"ngClass\", \"click\"], [\"class\", \"popular\", 4, \"ngIf\"], [1, \"price\"], [1, \"price-amount\"], [1, \"container-price\"], [1, \"for-free\"], [1, \"popular\"], [\"width\", \"17\", \"height\", \"16\", \"viewBox\", \"0 0 17 16\", \"fill\", \"none\", \"xmlns\", \"http://www.w3.org/2000/svg\"], [\"d\", \"M16.0074 5.56251L11.0484 4.84181L8.83162 0.347664C8.77107 0.224617 8.67146 0.125007 8.54841 0.0644604C8.23982 -0.0878834 7.86482 0.0390698 7.71052 0.347664L5.49372 4.84181L0.534736 5.56251C0.398017 5.58204 0.273017 5.64649 0.177313 5.74415C0.0616135 5.86307 -0.0021424 6.02306 5.49725e-05 6.18896C0.00225235 6.35486 0.0702232 6.5131 0.189032 6.62892L3.77693 10.127L2.92927 15.0664C2.90939 15.1813 2.92211 15.2995 2.96597 15.4075C3.00984 15.5156 3.0831 15.6092 3.17745 15.6777C3.2718 15.7462 3.38346 15.7869 3.49978 15.7952C3.61609 15.8035 3.7324 15.7791 3.83552 15.7246L8.27107 13.3926L12.7066 15.7246C12.8277 15.7891 12.9683 15.8106 13.1031 15.7871C13.4429 15.7285 13.6715 15.4063 13.6129 15.0664L12.7652 10.127L16.3531 6.62892C16.4508 6.53321 16.5152 6.40821 16.5347 6.27149C16.5875 5.9297 16.3492 5.61329 16.0074 5.56251Z\", \"fill\", \"black\"]],\n    template: function PaymentComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"section\", 0);\n        i0.ɵɵelementStart(1, \"div\", 1);\n        i0.ɵɵelementStart(2, \"div\", 2);\n        i0.ɵɵlistener(\"click\", function PaymentComponent_Template_div_click_2_listener() {\n          return ctx.onClose();\n        });\n        i0.ɵɵtext(3, \"X\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(4, \"p\", 3);\n        i0.ɵɵtext(5, \"Reload your\");\n        i0.ɵɵelementStart(6, \"span\");\n        i0.ɵɵtext(7, \"mag\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(8, \"p\", 4);\n        i0.ɵɵtext(9, \"Choose one of the plans below\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(10, PaymentComponent_ng_container_10_Template, 3, 1, \"ng-container\", 5);\n        i0.ɵɵelementStart(11, \"div\", 6);\n        i0.ɵɵelementStart(12, \"p\");\n        i0.ɵɵtext(13, \"* Bullet is counted only if you hit the target *\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(14, \"div\", 7);\n        i0.ɵɵelementStart(15, \"button\", 8);\n        i0.ɵɵlistener(\"click\", function PaymentComponent_Template_button_click_15_listener() {\n          return ctx.onPurchase();\n        });\n        i0.ɵɵtext(16, \"ACCEPT\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(10);\n        i0.ɵɵproperty(\"ngIf\", ctx.products);\n      }\n    },\n    directives: [i4.NgIf, i4.NgForOf, i4.NgClass],\n    styles: [\"[_nghost-%COMP%]{height:100%}section.payment[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:100%;height:100%;box-sizing:border-box;padding:63px 16px 0;overflow-y:auto;justify-content:space-between;background:radial-gradient(71.47% 224.04% at 19.09% 13.6%,#404658 0%,#161820 100%)}section.payment[_ngcontent-%COMP%]   div.container[_ngcontent-%COMP%]{display:flex;flex-direction:column}section.payment[_ngcontent-%COMP%]   div.container[_ngcontent-%COMP%]   p.title[_ngcontent-%COMP%]{display:flex;align-items:center;font-size:27px;color:#fff;margin:0 auto;padding-bottom:14px}section.payment[_ngcontent-%COMP%]   div.container[_ngcontent-%COMP%]   p.title[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#fce651;padding-left:.3em}section.payment[_ngcontent-%COMP%]   div.container[_ngcontent-%COMP%]   p.text[_ngcontent-%COMP%]{font-size:18px;color:#fff;margin:0 auto;width:270px;text-align:center;font-weight:300}section.payment[_ngcontent-%COMP%]   ul.prices[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:0;padding:0;list-style:none;height:100%;justify-content:space-around}section.payment[_ngcontent-%COMP%]   ul.prices[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{background:rgba(255,255,255,.1);border-radius:16px;box-sizing:border-box;padding:19px 22px;display:flex;flex-direction:column;position:relative;transition:all .3s;margin-bottom:10px}section.payment[_ngcontent-%COMP%]   ul.prices[_ngcontent-%COMP%]   li.selected[_ngcontent-%COMP%]{background-color:#fff}section.payment[_ngcontent-%COMP%]   ul.prices[_ngcontent-%COMP%]   li.selected[_ngcontent-%COMP%]   p.title[_ngcontent-%COMP%], section.payment[_ngcontent-%COMP%]   ul.prices[_ngcontent-%COMP%]   li.selected[_ngcontent-%COMP%]   div.price[_ngcontent-%COMP%]   div.container-price[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], section.payment[_ngcontent-%COMP%]   ul.prices[_ngcontent-%COMP%]   li.selected[_ngcontent-%COMP%]   p.for-free[_ngcontent-%COMP%]{color:#000}section.payment[_ngcontent-%COMP%]   ul.prices[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   p.title[_ngcontent-%COMP%]{color:#fff;margin:0;padding-bottom:10px}section.payment[_ngcontent-%COMP%]   ul.prices[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   p.popular[_ngcontent-%COMP%]{display:flex;position:absolute;top:13px;right:16px;margin:0;justify-content:space-between;width:110px;background-color:#fce651;color:#000;box-sizing:border-box;padding:3px 5px;font-weight:700}section.payment[_ngcontent-%COMP%]   ul.prices[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   div.price[_ngcontent-%COMP%]{display:flex;padding-bottom:13px;align-items:baseline}section.payment[_ngcontent-%COMP%]   ul.prices[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   div.price[_ngcontent-%COMP%]   p.price-amount[_ngcontent-%COMP%]{margin:0;font-weight:bold;font-size:50px;line-height:59px;color:#fc5151;display:flex;align-items:center;padding-right:8px}section.payment[_ngcontent-%COMP%]   ul.prices[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   div.price[_ngcontent-%COMP%]   div.container-price[_ngcontent-%COMP%]{display:flex;align-items:center}section.payment[_ngcontent-%COMP%]   ul.prices[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   div.price[_ngcontent-%COMP%]   div.container-price[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:18px;line-height:21px;color:#fff}section.payment[_ngcontent-%COMP%]   ul.prices[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   p.for-free[_ngcontent-%COMP%]{font-size:12px;line-height:14px;color:#fff;opacity:.6;margin:0}section.payment[_ngcontent-%COMP%]   div.explanation[_ngcontent-%COMP%]{padding-top:15px;padding-bottom:22px}section.payment[_ngcontent-%COMP%]   div.explanation[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:16px;line-height:19px;color:#fff;opacity:.7;font-weight:300}section.payment[_ngcontent-%COMP%]   div.controls[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between;margin-bottom:40px}section.payment[_ngcontent-%COMP%]   div.controls[_ngcontent-%COMP%]   button.confirm[_ngcontent-%COMP%]{height:56px;border-radius:4px;background-color:#fce651;color:#000;font-size:14px;line-height:16px;letter-spacing:1.25px;margin-bottom:.5em}.x[_ngcontent-%COMP%]{border:1px solid white;border-radius:28px;width:35px;height:35px;display:flex;justify-content:center;align-items:center;position:absolute}\"]\n  });\n  return PaymentComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}