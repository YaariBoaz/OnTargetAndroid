{"ast":null,"code":"/**\r\n * Pie tick module.\r\n */\nimport { __extends } from \"tslib\";\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\nimport { Tick } from \"../elements/Tick\";\nimport { MutableValueDisposer, MultiDisposer } from \"../../core/utils/Disposer\";\nimport { registry } from \"../../core/Registry\";\n/**\r\n * ============================================================================\r\n * MAIN CLASS\r\n * ============================================================================\r\n * @hidden\r\n */\n/**\r\n * Draws an tick line for a pie slice connecting it to a related label.\r\n *\r\n * @see {@link IPieTickEvents} for a list of available events\r\n * @see {@link IPieTickAdapters} for a list of available Adapters\r\n */\nvar PieTick = /** @class */function (_super) {\n  __extends(PieTick, _super);\n  /**\r\n   * Constructor\r\n   */\n  function PieTick() {\n    var _this = _super.call(this) || this;\n    /**\r\n     * A label element this tick is attached to.\r\n     */\n    _this._label = new MutableValueDisposer();\n    /**\r\n     * A slice element this tick is attached to.\r\n     */\n    _this._slice = new MutableValueDisposer();\n    _this.className = \"PieTick\";\n    _this.element = _this.paper.add(\"polyline\");\n    _this._disposers.push(_this._label);\n    _this._disposers.push(_this._slice);\n    _this.applyTheme();\n    return _this;\n  }\n  /**\r\n   * Draws the tick element.\r\n   *\r\n   * @ignore Exclude from docs\r\n   */\n  PieTick.prototype.draw = function () {\n    _super.prototype.draw.call(this);\n    var slice = this.slice;\n    var label = this.label;\n    var series = slice.dataItem.component;\n    if (slice && slice.radius > 0 && label && label.text) {\n      var x0 = slice.dx + slice.slice.dx + slice.pixelX + slice.ix * slice.radius * slice.scale;\n      var y0 = slice.dy + slice.slice.dy + slice.pixelY + slice.iy * slice.radiusY * slice.scale;\n      var x1 = void 0;\n      var y1 = void 0;\n      var x2 = void 0;\n      var y2 = void 0;\n      if (series.alignLabels) {\n        x1 = label.pixelX - this.length;\n        y1 = label.pixelY;\n        x2 = label.pixelX;\n        y2 = y1;\n        if (label.horizontalCenter == \"right\") {\n          x1 += 2 * this.length;\n          x2 = x1 - this.length;\n        }\n      } else {\n        var r = label.pixelRadius(slice.radius);\n        x1 = x0 + r * slice.ix;\n        y1 = y0 + r * slice.iy;\n        x2 = x1;\n        y2 = y1;\n      }\n      this.element.attr({\n        \"points\": [x0, y0, x1, y1, x2, y2]\n      });\n    }\n  };\n  Object.defineProperty(PieTick.prototype, \"slice\", {\n    /**\r\n     * @return Slice\r\n     */\n    get: function () {\n      return this._slice.get();\n    },\n    /**\r\n     * Slice element tick is attached to.\r\n     *\r\n     * @param slice  Slice\r\n     */\n    set: function (slice) {\n      this._slice.set(slice, new MultiDisposer([slice.events.on(\"transformed\", this.invalidate, this), slice.events.on(\"validated\", this.invalidate, this)]));\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(PieTick.prototype, \"label\", {\n    /**\r\n     * @return Label\r\n     */\n    get: function () {\n      return this._label.get();\n    },\n    /**\r\n     * Label element tick is attached to.\r\n     *\r\n     * @param label  Label\r\n     */\n    set: function (label) {\n      this._label.set(label, label.events.on(\"transformed\", this.invalidate, this, false));\n    },\n    enumerable: true,\n    configurable: true\n  });\n  return PieTick;\n}(Tick);\nexport { PieTick };\n/**\r\n * Register class in system, so that it can be instantiated using its name from\r\n * anywhere.\r\n *\r\n * @ignore\r\n */\nregistry.registeredClasses[\"PieTick\"] = PieTick;\n//# sourceMappingURL=PieTick.js.map","map":null,"metadata":{},"sourceType":"module"}